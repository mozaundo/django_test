d=i(1),_=i(2),l=i(3),c="POST",p=function(){function e(e,t,i,n){var r=this;this.Pt=e,this.Wt=i,this.Et=n,this.Bt="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+u.FullVersionString,this.wt=new s.default,this._=!1,this.Ct=new a.default,this.bt=!1,this.Dt=0,d.isUint8ArrayAvailable()||(this.Bt+="&content-encoding=base64"),this.Bt=t+this.Bt,this.Et||(this.bt=!0,this.Et={sendPOST:function(e,t,i,n,o,s){if(d.useXDomainRequest()){var a=new XDomainRequest;a.open(c,e),a.onload=function(){o(200,null)},a.onerror=function(){n(400,null)},a.ontimeout=function(){i(500,null)},a.send(t)}else{var u=new XMLHttpRequest;u.open(c,e,!s),u.onload=function(){o(u.status,r.Ot(u.getAllResponseHeaders()))},u.onerror=function(){n(u.status,r.Ot(u.getAllResponseHeaders()))},u.ontimeout=function(){i(u.status,r.Ot(u.getAllResponseHeaders()))},u.send(t)}}})}return e.prototype.hasIdleConnection=function(){return this.Dt<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._&&this.Pt.length>0&&this.Ct.allowRequestSending();)this.Dt++,this.Nt(this.Pt.pop(),0,!1);this.hasIdleConnection()&&l.default.scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this.Dt},e.prototype.flush=function(){for(;this.Pt.length>0;)this.Nt(this.Pt.pop(),0,!0)},e.prototype.pause=function(){this._=!0},e.prototype.resume=function(){this._=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this.Pt.length=0},e.prototype.Nt=function(e,t,i){var o=this;if(this._)return this.Dt--,void this.Wt.addBackRequest(e);var s=0,a="";for(var u in e)e.hasOwnProperty(u)&&(this.wt.isTenantKilled(u)?(_.default.eventsDropped(e[u],n.AWTEventsDroppedReason.KillSwitch),delete e[u]):(a.length>0&&(a+=","),a+=u,s++));if(s>0){var l=r.default.getPayloadBlob(e,s),c=this.Bt+"&x-apikey="+a+"&client-time-epoch-millis="+Date.now().toString();this.Ct.shouldAddClockSkewHeaders()&&(c=c+"&time-delta-to-apply-millis="+this.Ct.getClockSkewHeaderValue());var p=void 0;p=d.isUint8ArrayAvailable()?new Uint8Array(l):r.default.base64Encode(l),this.bt&&i&&d.isBeaconsSupported()?navigator.sendBeacon(c,p):this.Et.sendPOST(c,p,function(i,n){o.Rt(i,n,e,s,a,t)},function(i,n){o.Rt(i,n,e,s,a,t)},function(i,n){o.Rt(i,n,e,s,a,t)},!1)}else i||this.Mt(null,{})},e.prototype.Rt=function(e,t,i,r,s,a){var u=this,d=!0;if(void 0!==e){if(t){var c=this.wt.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this.Ct.setClockSkew(t["time-delta-millis"]);for(var p=0;p<c.length;++p)_.default.eventsDropped(i[c[p]],n.AWTE